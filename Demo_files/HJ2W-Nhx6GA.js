if (self.CavalryLogger) { CavalryLogger.start_js(["z6Ti0"]); }

__d("LiveChatPluginLikeButtonSVG.react",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return g.jsx("svg",{height:"24px",preserveAspectRatio:"xMinYMax meet",viewBox:"0 0 40.16 42.24",width:"22px",children:g.jsx("path",{d:"M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z",transform:"translate(-898.5 -1563.26)",fill:"none",fillRule:"evenodd",stroke:this.props.threadColor,strokeLinecap:"round",strokeWidth:"2"})})};return b}(g.PureComponent);e.exports=a}),null);
__d("LiveChatPluginMessageComposerAttachmentItem.react",["cx","ix","Image.react","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.attachment;if(a.type.startsWith("image/"))return[i.jsx("div",{className:"_3l_i",style:{backgroundImage:a.thumbnail_url}},this.props.uploadID+"item"),i.jsx(b("ShimButton.react"),{className:"_3l_j _3l_k",onClick:this.props.removeAttachment},this.props.uploadID+"removeButton")];var c=i.jsx("div",{className:"_3l_l",style:{backgroundColor:this.props.threadColor},children:i.jsx(b("Image.react"),{src:a.type.startsWith("video/")?h("359148"):h("359146")})});a=a.name;var d=a.split(".").pop().toUpperCase();return i.jsxs("div",{className:"_3l_m",children:[c,i.jsxs("div",{className:"_3l_n",children:[i.jsx("div",{className:"_3l_o",children:d}),i.jsx("div",{className:"_3l_p",children:a})]}),i.jsx(b("ShimButton.react"),{className:"_3l_j _3l_q",onClick:this.props.removeAttachment})]})};return c}(i.PureComponent);e.exports=a}),null);
__d("LiveChatPluginMessageComposerAttachmentShelf.react",["cx","fbt","LiveChatPluginAttachmentUploadError","LiveChatPluginMessageComposerAttachmentItem.react","React","XUISpinner.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$1=new Map();return b}var d=c.prototype;d.render=function(){var a=this;if(this.props.attachments.size===0&&this.props.error===b("LiveChatPluginAttachmentUploadError").NO_ERROR)return null;this.props.attachments.forEach(function(b,c){a.$1.has(c)||a.$1.set(c,b)});this.$1.forEach(function(b,c){a.props.attachments.has(c)||a.$1["delete"](c)});var c=Array.from(this.$1).map(function(c){var d=c[0];c=c[1];return i.jsxs("div",{className:"_1i5v",children:[i.jsx(b("LiveChatPluginMessageComposerAttachmentItem.react"),{attachment:c,removeAttachment:function(){a.props.removeAttachment(d)},threadColor:a.props.threadColor,uploadID:d}),a.props.uploadingAttachments.has(d)?i.jsx(b("XUISpinner.react"),{className:"_1i63",background:"dark",size:"large"}):null]},d)});return i.jsxs("div",{className:"_1i69",children:[this.$2(),i.jsx("div",{className:"_2l9u",children:c})]})};d.$2=function(){var a;switch(this.props.error){case b("LiveChatPluginAttachmentUploadError").EXCEEDED_MAX_FILES:a=h._("Upload no more than 5 files at once. Please try again.");break;case b("LiveChatPluginAttachmentUploadError").EXCEEDED_FILE_MAX_SIZE:a=h._("This file exceeds the size limit of 25MB.");break;case b("LiveChatPluginAttachmentUploadError").UPLOAD_FAILED:a=h._("This file couldn't be uploaded. Please try again.");break;case b("LiveChatPluginAttachmentUploadError").NO_ERROR:default:return null}return i.jsx("div",{className:"_2l9v",children:a})};return c}(i.PureComponent);e.exports=a}),null);
__d("MPNBlockedPageComposer.react",["cx","fbt","MessagingPluginContext","MessagingPluginThreadActions","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React");function a(){var a=i.useContext(b("MessagingPluginContext"));return i.jsx("div",{className:"_94wl",children:i.jsxs("div",{className:"_94wm",children:[i.jsx("div",{children:h._("You've Turned Off Messages for {pageName}",[h._param("pageName",a.state.pageName)])}),h._("You can't message them, and you won't receive any of their messages."),i.jsx(b("ShimButton.react"),{className:"_94wo",onClick:function(){b("MessagingPluginThreadActions").blockOrUnblockPage(a)},children:i.jsx("div",{className:"_94wp",children:h._("Turn On Messages")})})]})})}}),null);
__d("MPNDesktopBotMenuDialog.react",["cx","CometMenu.react","CometMenuItem.react","LiveChatPluginLoggerUtil","MercuryIDs","MessagingPluginContext","MNCommercePostbackCTADataManager","MPNIdentity","React","URI"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){c=a.call(this,c,d)||this;c.state={navigationPath:[]};c.$1=b("LiveChatPluginLoggerUtil").getAttributionTags();c.$2=b("MercuryIDs").getThreadIDFromUserID(c.context.state.pageID);return c}var d=c.prototype;d.render=function(){var a=this,c=[],d=this.props.menuItems;for(var e=0;e<this.state.navigationPath.length;e++){var f=this.state.navigationPath[e];d!=null&&(d=d[f].nested_ctas)}d&&d.map(function(d,b){switch(d.action_type){case 4:a.$3(d,c);break;case 2:a.$4(d,c);break;case 11:a.$5(d,b,c);break;default:c.push({menuItemProps:{primaryText:d.title||""}});break}});return i.jsx("div",{className:"_968x",children:i.jsx(b("CometMenu.react"),{size:"full",withArrow:!0,children:c.map(function(c,a){return i.createElement(b("CometMenuItem.react"),babelHelpers["extends"]({},c.menuItemProps,{key:a}))})})})};d.$4=function(a,c){var d=this.context.state.pageID,e=function(c){(h||(h=b("URI"))).goURIOnNewWindow(a.action_link||"");c=b("MPNIdentity").MPNIdentity.currentUserID();b("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",c,d,b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:"customer_chat_bot_menu_url_redirect_clicked"})};c.push({menuItemProps:{onClick:e,primaryText:a.title||""}})};d.$5=function(a,b,c){var d=this,e=function(a){d.setState(function(a){return{navigationPath:a.navigationPath.concat(b)}})};c.push({menuItemProps:{onClick:e,primaryText:a.title||""}})};d.$3=function(a,c){var d=this,e=this.context.state.pageID,f=function(c){c=b("MPNIdentity").MPNIdentity.currentUserState();switch(c){case b("MPNIdentity").MPNIdentityState.FB:b("MNCommercePostbackCTADataManager").sendAndConfirm(a.id,a.title||"",d.$2,null,null,null,d.$1,null,null,"source:discovery:customer_chat_plugin");break;case b("MPNIdentity").MPNIdentityState.GUEST:var f=d.context.state.messageStore;f=f.sendQueue;if(!f)return;f.enqueueAndSend(a.title||"",f.makePlatformTokenForPostbackCTA(a.id));break;default:return}f=b("MPNIdentity").MPNIdentity.currentUserID();b("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",f,e,c===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:"customer_chat_bot_menu_postback_clicked"})};c.push({menuItemProps:{onClick:f,primaryText:a.title||""}})};return c}(i.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopBotMenuButton.react",["cx","fbt","AsyncRequest","BasePopoverTrigger.react","CometPressable.react","LiveChatPluginConstants","LiveChatPluginGuestPersistentMenuQuery","LiveChatPluginLikeButtonSVG.react","LiveChatPluginLoggerUtil","LiveChatPluginSendButtonSVG.react","MessagingPluginContext","MPNBotMenuButtonSVG.react","MPNDesktopBotMenuDialog.react","MPNIdentity","MPNLocalState","MPNStorage","React","ShimButton.react","XMessengerBotsMenuController","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={menuItems:null},c.$4=function(){c.setState(c.$3(!0)),c.props.onClick()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.state.menuItems==null&&this.$2()};d.componentDidUpdate=function(){this.state.menuItems==null&&this.context.state.accessToken&&this.$2()};d.componentWillUnmount=function(){this.$1&&(this.$1.abort(),this.$1=null),this.setState(this.$3(!1))};d.render=function(){var a=this,c=this.context.state,d=c.isComposerDisabled,e=c.hasPersistentMenu,f=c.threadCSSColor;if(!d&&(!e||!this.state.menuItems)){c=b("gkx")("1819038");return b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB&&c?i.jsx(b("ShimButton.react"),{className:"_4bqf _95jk",onClick:this.props.onLikeClick,children:i.jsx(b("LiveChatPluginLikeButtonSVG.react"),{threadColor:f})}):i.jsx("div",{className:" _95jk _95ms",children:i.jsx(b("LiveChatPluginSendButtonSVG.react"),{threadColor:b("LiveChatPluginConstants").GUEST_SEND_BUTTON_COLOR_EMPTY_INPUT})})}return i.jsx(b("BasePopoverTrigger.react"),{autoAlign:!0,popover:b("MPNDesktopBotMenuDialog.react"),popoverProps:{menuItems:this.state.menuItems},children:function(c,d){return i.jsx("div",{ref:c,children:i.jsx("div",{className:"_94vq",children:i.jsx(b("CometPressable.react"),{overlayRadius:50,"aria-label":h._("Persistent menu"),onPress:(a.$4,d),children:i.jsx(b("MPNBotMenuButtonSVG.react"),{threadColor:f})})})})}})};d.$2=function(){var a=this,c=this.context,d=c.state,e=c.dispatchAction;c=d.pageID;d=b("MPNStorage").getFBStorageState();if(!d||d.chatState===b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED)return;d=b("MPNIdentity").MPNIdentity.currentUserState();switch(d){case b("MPNIdentity").MPNIdentityState.GUEST:d=(d=b("MPNIdentity").MPNIdentity.currentUser())==null?void 0:d.accessToken;if(d==null)return;b("LiveChatPluginGuestPersistentMenuQuery").fetch(c,d,function(b){b!=null&&b.length>0?(a.setState({menuItems:b}),e({type:"TOGGLE_HAS_PERSISTENT_MENU",hasPersistentMenu:!0})):(a.setState({menuItems:[]}),e({type:"TOGGLE_HAS_PERSISTENT_MENU",hasPersistentMenu:!1}))});break;case b("MPNIdentity").MPNIdentityState.FB:d=b("XMessengerBotsMenuController").getURIBuilder().setString("page_id",c).setBool("should_flatten",!0).getURI();this.$1=new(b("AsyncRequest"))().setURI(d).setHandler(function(b){a.setState({menuItems:b.payload.menu})}).setErrorHandler(function(b){a.setState({menuItems:[]})});this.$1.send();break;default:return}};d.$3=function(a){var c=this.context.state.pageID,d=b("MPNIdentity").MPNIdentity.currentUserID();b("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",d,c,b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:a?"customer_chat_bot_menu_opened":"customer_chat_bot_menu_closed"})};return c}(i.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MessagingPluginDesktopProfilePicture.react",["cx","Image.react","MessagingPluginContext","PrivacyTransparentOverlay.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.context.state,c=a.pageProfilePictureUri;a=a.isBusinessActive;var d=this.props,e=d.className;d=d.greenDotSize;d=d==="large"?"_95lb _97p-":"_95lb _97ot";return h.jsxs(b("PrivacyTransparentOverlay.react"),{children:[h.jsx(b("Image.react"),{className:(e=e)!=null?e:"_95la",src:c}),a?h.jsx("div",{className:d}):null]})};return c}(h.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MessagingPluginDesktopThreadMenu.react",["cx","fbt","CometMenu.react","CometMenuItem.react","CometSeparatorMenuItem.react","MessagingPluginContext","MessagingPluginThreadActions","MPNIdentity","React","URI","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React");function a(a){var c=j.useContext(b("MessagingPluginContext")),d=c.state,e=d.pageID,f=d.isPageBlocked,g=d.locale;d=d.showUpgradeUpsellPrompt;var k=b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.GUEST,l=!0;!k?l=b("gkx")("1830721"):l=!b("gkx")("1828157");return j.jsx("div",{className:"_968x",children:j.jsxs(b("CometMenu.react"),{size:"full",withArrow:!0,children:[k&&d?j.jsx(b("CometMenuItem.react"),{icon:{src:"/images/web_messenger/app-messenger_32-4x.png",style:"square"},iconStyle:"normal",onClick:function(){return a.onUpgrade()},primaryText:h._("Continue in Messenger")}):null,j.jsx(b("CometMenuItem.react"),{icon:{src:"/images/web_messenger/cross-circle_32-4x.png",style:"square"},onClick:function(){c.dispatchAction({type:"TOGGLE_END_CHAT",showEndChat:!0})},primaryText:h._("End Chat")}),!k&&f!=null?j.jsx(b("CometMenuItem.react"),{icon:{src:"/images/web_messenger/message-cross_32-4x.png",style:"square"},iconStyle:"normal",onClick:function(){b("MessagingPluginThreadActions").blockOrUnblockPage(c)},primaryText:f?h._("Turn On Messages"):h._("Turn Off Messages")}):null,k?null:j.jsx(b("CometMenuItem.react"),{icon:a.isMuted?{src:"/images/web_messenger/bell-cross_32-4x.png",style:"square"}:{src:"/images/web_messenger/bell_32-4x.png",style:"square"},iconStyle:"normal",onClick:a.onClickMuteOrUnmute,primaryText:a.isMuted?h._("Unmute Conversation"):h._("Mute Conversation")}),l?j.jsx(b("CometMenuItem.react"),{icon:{src:"/images/web_messenger/caution-triangle_32-4x.png",style:"square"},iconStyle:"normal",onClick:function(){b("MessagingPluginThreadActions").openFRXPrompt(e,g)},primaryText:h._("Something's Wrong")}):null,j.jsx(b("CometSeparatorMenuItem.react"),{}),j.jsx(b("CometMenuItem.react"),{onClick:function(){(i||(i=b("URI"))).goURIOnNewWindow("https://www.facebook.com/"+e)},primaryText:h._("Visit Facebook Page")}),j.jsx(b("CometMenuItem.react"),{onClick:function(){(i||(i=b("URI"))).goURIOnNewWindow("https://www.facebook.com/business/m/add-messenger-to-your-website")},primaryText:h._("Add Messenger To Your Website")})]})})}}),null);
__d("MPNDesktopDialogHeader.react",["cx","fbt","Arbiter","BasePopoverTrigger.react","FlexLayout.react","LineClamp.react","LiveChatPluginLoggerUtil","MessagingPluginContext","MessagingPluginDesktopProfilePicture.react","MessagingPluginDesktopThreadMenu.react","MessagingPluginThreadActions","MPNConstants","MPNHeaderActionButton.react","MPNMinusButtonSVG.react","MPNMoreInfoButtonSVG.react","MPNVerifiedBadge.react","React","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React");(i||(i=b("stylex"))).inject(".qmqpeqxj{border-top-left-radius:50%}",1,".qmqpeqxj{border-top-right-radius:50%}");i.inject(".e7u6y3za{border-top-right-radius:50%}",1,".e7u6y3za{border-top-left-radius:50%}");i.inject(".qwcclf47{border-bottom-right-radius:50%}",1,".qwcclf47{border-bottom-left-radius:50%}");i.inject(".nmlomj2f{border-bottom-left-radius:50%}",1,".nmlomj2f{border-bottom-right-radius:50%}");i.inject(".hpj0pwwo{font-size:1.0625rem}",1);i.inject(".igjjae4c{font-weight:bold}",1);i.inject(".frx9we7d{word-break:break-all}",1);i.inject(".mov749r8{color:var(--fds-black-alpha-50)}",1);i.inject(".nfkogyam{font-size:0.8125rem}",1);i.inject(".lcfup58g{padding-left:4px}",1,".lcfup58g{padding-right:4px}");i.inject(".om3e55n1{position:relative}",1);i.inject(".iy1nols1{top:-1px}",1);a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.state={isMuted:d.context.state.isMuted},d.$3=function(){var a=d.context.state,c=a.guestID;a=a.pageID;d.$1=b("MessagingPluginThreadActions").launchUpgradeFlowDesktop(d.context,d.props.history,b("MPNConstants").MPNUpgradePrompt.CONTINUE_IN_MESSENGER);b("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",c,a,"guest_chat_tab",{action_type:b("MPNConstants").MPNUpgradePrompt.CONTINUE_IN_MESSENGER})},d.$2=function(){var a=d.state.isMuted;b("MessagingPluginThreadActions").muteOrUnmutePage(d.context.state.pageID,a);d.setState({isMuted:!a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){this.$1&&b("Arbiter").unsubscribe(this.$1)};d.render=function(){var a=this,c=this.context.state,d=c.pageName;c=c.pageVerifiedStatus;var e=this.props.menuEnabled!==!1,f=this.context.state.optimisticStorageState.showUpgradePrompt!=null&&this.context.state.optimisticStorageState.showUpgradePrompt!==b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN;return j.jsxs("div",{className:"_9dxj"+(f?"":" _9gop"),children:[j.jsx("div",{className:"nmlomj2f qwcclf47 e7u6y3za qmqpeqxj",children:j.jsx(b("MessagingPluginDesktopProfilePicture.react"),{})}),j.jsxs("div",{className:"_9dxi",children:[j.jsxs(b("FlexLayout.react"),{align:"center",children:[j.jsx(b("LineClamp.react"),{className:"frx9we7d igjjae4c hpj0pwwo",lines:1,children:j.jsx("strong",{children:d})}),c&&c!=="not_verified"?j.jsx("span",{className:"iy1nols1 om3e55n1 lcfup58g",children:j.jsx(b("MPNVerifiedBadge.react"),{verificationStatus:c,size:14})}):null]}),j.jsx(b("LineClamp.react"),{className:"nfkogyam mov749r8",lines:1,children:h._("Powered by Messenger")})]}),j.jsx("div",{className:"_9dxh"}),j.jsxs("div",{className:"_9dzn",children:[e&&j.jsx(b("BasePopoverTrigger.react"),{autoAlign:!0,popover:b("MessagingPluginDesktopThreadMenu.react"),popoverProps:{history:this.props.history,isMuted:this.state.isMuted,onClickMuteOrUnmute:this.$2,onUpgrade:this.$3},children:function(a,c){return j.jsx("div",{ref:a,children:j.jsx(b("MPNHeaderActionButton.react"),{label:h._("More"),onPress:c,children:j.jsx(b("MPNMoreInfoButtonSVG.react"),{})})})}}),j.jsx(b("MPNHeaderActionButton.react"),{label:h._("close"),onPress:function(){var b;return(b=a.props.ActionDelegate)==null?void 0:b.minimize()},children:j.jsx(b("MPNMinusButtonSVG.react"),{})})]})]})};return c}(j.PureComponent);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopGuestAttachmentButton.react",["cx","MessagingPluginContext","MPNConstants","MPNPaperclipIconSVG.react","MPNStorage","React","ShimButton.react","Tooltip.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.context.dispatchAction;return h.jsx(b("Tooltip.react"),{tooltip:"Attach Files",children:h.jsx(b("ShimButton.react"),{"data-testid":void 0,className:"_95jj _9jru",onClick:function(){b("MPNStorage").setShowUpgradePrompt(b("MPNConstants").MPNUpgradePrompt.ATTACHMENT_UPSELL),a({type:"UPDATE_UPGRADE_UPSELL_PROMPT",upgradeUpsellPrompt:b("MPNConstants").MPNUpgradePrompt.ATTACHMENT_UPSELL})},children:h.jsx(b("MPNPaperclipIconSVG.react"),{color:this.context.state.threadCSSColor})})})};return c}(h.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopGuestUpgradeUpsellPrompt.react",["ix","cx","fbt","Arbiter","ChatPluginMessengerBlurpleLogoSVG.react","CometPressable.react","Image.react","LiveChatPluginLoggerUtil","LiveChatPluginPromptButton.react","MessagingPluginContext","MessagingPluginThreadActions","MPNConstants","MPNGuestUpgradeFBTStrings","MPNStorage","React","asset","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentWillUnmount=function(){this.$1&&b("Arbiter").unsubscribe(this.$1)};d.componentDidMount=function(){var a=this.context.state,c=a.pageID;a=a.guestID;b("LiveChatPluginLoggerUtil").logImpressionFromNewUI("tab_impression",c,"upgrade_prompt",null,null,null,null,null,a,{prompt_type:this.props.prompt})};d.render=function(){var a=this,c=this.context.state,d=c.shouldUseNewUnifiedBottomUpsellPrompt;c=c.shouldUseNewUnifiedTwoButtonUpsellPrompt;var e=this.props.prompt,f=b("MPNGuestUpgradeFBTStrings").getPromptTitle(e,this.context),h=b("MPNGuestUpgradeFBTStrings").getPromptSubtitle(e,this.context);c=e===b("MPNConstants").MPNUpgradePrompt.DONT_WAIT_FOR_REPLY_UPSELL&&!c;var k=b("gkx")("1740404");k=k?j.jsx(b("ChatPluginMessengerBlurpleLogoSVG.react"),{height:24,width:24}):j.jsx(b("Image.react"),{className:"messengerIcon",src:g("1273954")});return j.jsxs("div",{className:"_95to"+(d?"":" _9aqp")+(d?" _9j_q":""),children:[j.jsxs("div",{className:"promptHeaderContainer",children:[j.jsx("div",{className:"_95tx",children:k}),j.jsxs("div",{className:"_95tr",children:[j.jsx("div",{className:"_95ty",children:f}),j.jsx("div",{className:"_95tz",children:h})]}),c&&j.jsx("div",{className:"_9aqq _95lg",children:j.jsx(b("CometPressable.react"),{"aria-label":i._("Close"),onPress:function(){b("MPNStorage").setShowUpgradePrompt(b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN),a.$2()},overlayRadius:50,children:j.jsx(b("Image.react"),{src:g("478231")})})})]}),j.jsx("div",{className:"promptFooterContainer",children:c?j.jsx("div",{className:"continueButton",children:j.jsx(b("LiveChatPluginPromptButton.react"),{color:this.props.color,hasIcon:!1,onClick:function(){a.$1=b("MessagingPluginThreadActions").launchUpgradeFlowDesktop(a.context,a.props.history,e),a.$3()},text:i._("Continue in Messenger")})}):j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"dismissButton footerButton",children:j.jsx(b("LiveChatPluginPromptButton.react"),{color:"rgba(0, 0, 0, .05)",hasIcon:!1,onClick:function(){b("MPNStorage").setShowUpgradePrompt(b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN),a.$2()},text:i._("Not Now")})}),j.jsx("div",{className:"continueButton footerButton",children:j.jsx(b("LiveChatPluginPromptButton.react"),{color:this.props.color,hasIcon:!0,onClick:function(){a.$1=b("MessagingPluginThreadActions").launchUpgradeFlowDesktop(a.context,a.props.history,e),a.$3()},text:i._("Continue")})})]})})]})};d.$3=function(){var a=this.context.state,c=a.guestID;a=a.pageID;b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",c,a,"upgrade_prompt",{button_name:"upgrade_prompt_continue",prompt_type:this.props.prompt})};d.$2=function(){var a=this.context,c=a.dispatchAction;a=a.state;var d=a.guestID;a=a.pageID;c({type:"UPDATE_UPGRADE_UPSELL_PROMPT",upgradeUpsellPrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN});b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",d,a,"upgrade_prompt",{button_name:"upgrade_prompt_not_now",prompt_type:this.props.prompt})};return c}(j.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("EllipsisText.react",["cx","DOMContainer.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){var c=a.children instanceof Node?h.jsx(b("DOMContainer.react"),{children:a.children}):a.children;return h.jsx("span",{id:a.id,className:b("joinClasses")(a.className,"_6i6a"),children:c})}}),null);
__d("MPNDesktopSwitchAccountMenu.react",["cx","fbt","CometMenu.react","CometMenuItem.react","MessagingPluginContext","MessagingPluginThreadActions","React"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React");function a(a){var c=i.useContext(b("MessagingPluginContext"));return i.jsx("div",{"data-testid":void 0,className:"_968x",children:i.jsx(b("CometMenu.react"),{size:"normal",withArrow:!0,children:i.jsx(b("CometMenuItem.react"),{onClick:function(){b("MessagingPluginThreadActions").switchAccount(c)},primaryText:h._("Switch accounts")})})})}}),null);
__d("MessagingPluginDesktopInformationMenu.react",["cx","fbt","CometMenu.react","CometMenuItem.react","MessagingPluginContext","React","URI"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React");function a(a){a=j.useContext(b("MessagingPluginContext"));var c=a.state.pageID;return j.jsx("div",{"data-testid":void 0,className:"_968x",children:j.jsxs(b("CometMenu.react"),{size:"full",withArrow:!0,children:[j.jsx(b("CometMenuItem.react"),{onClick:function(){(i||(i=b("URI"))).goURIOnNewWindow("https://www.facebook.com/"+c)},primaryText:h._("Visit Facebook Page")}),j.jsx(b("CometMenuItem.react"),{onClick:function(){(i||(i=b("URI"))).goURIOnNewWindow("https://www.facebook.com/business/m/add-messenger-to-your-website")},primaryText:h._("Add Messenger To Your Website")})]})})}}),null);
__d("XChatPluginDesktopIncognitoLoginPopupController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/chat/incognito_login/",{})}),null);
__d("MPNDesktopWelcomePageModal.react",["ix","cx","fbt","BasePopoverTrigger.react","BootloaderResource","CometLink.react","CometPressable.react","EllipsisText.react","FlexLayout.react","Image.react","JSResource","LineClamp.react","LiveChatPluginConstants","LiveChatPluginLoggerUtil","MessagingPluginContext","MessagingPluginDesktopInformationMenu.react","MessagingPluginDesktopProfilePicture.react","MPNConstants","MPNDesktopSwitchAccountMenu.react","MPNHeaderActionButton.react","MPNIdentity","MPNLocalState","MPNMessengerIconSVG.react","MPNMinusButtonSVG.react","MPNMoreInfoButtonSVG.react","MPNNavigation","MPNStorage","MPNVerifiedBadge.react","MPNXDMessageManager","PluginOptin","PopupWindow","React","ReactDOM","ShimButton.react","XChatPluginDesktopIncognitoLoginPopupController","XCookiesPolicyController","XDataPolicyController","XTermsController","asset","gkx","performanceAbsoluteNow","stylex"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=b("React");(j||(j=b("stylex"))).inject(".lcfup58g{padding-left:4px}",1,".lcfup58g{padding-right:4px}");var m=250;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.modalSheetRef=l.createRef(),d.$7=function(){var a=d.context,c=a.state;a=a.dispatchAction;c=c.pageID;a({type:"UPDATE_CONTINUE_CLICK_TIME",continueClickTime:(k||(k=b("performanceAbsoluteNow")))()});b("MPNIdentity").MPNIdentity.performUIAction(d.$10,function(){var a=b("MPNStorage").getFBStorageState();a==null?a={requestID:b("MPNStorage").requestID,currentPath:b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW,userID:"0",chatState:b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED,visibility:"not-hidden",showUpgradePrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN,accessToken:null,expirationTimestamp:null,rdr:b("MPNConstants").MPNRedirect.NEW_GUEST_SESSION}:a=babelHelpers["extends"]({},a,{chatState:b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED,rdr:"new_guest_sess"});b("MPNStorage").setFBStorageState(a);b("MPNXDMessageManager").reloadPlugin()},function(){var a=d.context.dispatchAction;a({type:"UPDATE_COOKIE_ACCESS_DENIED",cookieAccessDenied:!0});d.$10()});b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",null,c,"welcome_page_with_guest_option",{button_name:"continue_as_guest"})},d.$10=function(){b("MPNNavigation").navigateToRoute(d.props.history,b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW),d.props.ActionDelegate&&d.props.ActionDelegate.onContinueAsGuest(function(){})},d.$11=function(){var a=d.context,c=a.state;a=a.dispatchAction;c=c.pageID;a({type:"UPDATE_CONTINUE_CLICK_TIME",continueClickTime:(k||(k=b("performanceAbsoluteNow")))()});b("MPNIdentity").MPNIdentity.performUIAction(function(){b("MPNNavigation").navigateToRoute(d.props.history,b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW)},function(){b("MPNIdentity").MPNIdentity.clearUserChangesSubscription(),b("MPNStorage").setPath(b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW),b("MPNXDMessageManager").reloadPlugin()},function(){b("MPNStorage").clearThirdPartyStorageState(),b("MPNXDMessageManager").reloadPlugin()});b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",null,c,"itp_page",{button_name:"continue"})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this.context.state.hasGuestMode;this.$1(a)};d.render=function(){return l.jsx("div",{children:this.$2()})};d.$2=function(){var a=this,c=this.context.state,d=c.hasGuestMode,e=c.pageName,f=c.pageVerifiedStatus,h=c.shouldRemoveLoggedinLegalText,j=c.shouldEnableFunnelImprovement,k=this.context.state;c=b("MPNIdentity").MPNIdentity.currentUserState()==b("MPNIdentity").MPNIdentityState.FB;var m=b("gkx")("1189683"),n=b("XTermsController").getURIBuilder().getURI().toString(),o=b("XDataPolicyController").getURIBuilder().getURI().toString(),p=b("XCookiesPolicyController").getURIBuilder().getURI().toString(),q=i._("Chat with {pageName}",[i._param("pageName",k.pageName)]);return l.jsx("div",{role:"none",onMouseEnter:function(){j&&b("BootloaderResource").preload(b("JSResource")("MessagingPluginDialogBody.react").__setRef("MPNDesktopWelcomePageModal.react"))},className:"_94ve",children:l.jsx("div",{ref:this.modalSheetRef,className:"_94vf",onClick:this.$3,role:"none",children:l.jsxs("div",{className:"welcomePageModalSheetContent",children:[l.jsxs("div",{className:"_9095",children:[l.jsx(b("MessagingPluginDesktopProfilePicture.react"),{className:"_9096",greenDotSize:"large"}),l.jsx("div",{className:"_9dxh"}),l.jsxs("div",{className:"_9dzn",children:[c?l.jsx(b("BasePopoverTrigger.react"),{align:"middle",autoAlign:!0,popover:b("MPNDesktopSwitchAccountMenu.react"),popoverProps:{},children:function(a,c){return l.jsx("div",{ref:a,className:"_97lh",children:l.jsxs(b("CometPressable.react"),{testid:void 0,onPress:c,overlayRadius:6,children:[l.jsx(b("Image.react"),{className:"_95lg _97lg",src:k.viewerProfilePicureUri}),l.jsx(b("Image.react"),{className:"_97lc",src:g("481882")})]})})}}):null,l.jsx(b("BasePopoverTrigger.react"),{autoAlign:!0,popover:b("MessagingPluginDesktopInformationMenu.react"),popoverProps:{},children:function(a,c){return l.jsx("div",{ref:a,children:l.jsx(b("MPNHeaderActionButton.react"),{label:i._("More"),onPress:c,children:l.jsx(b("MPNMoreInfoButtonSVG.react"),{})})})}}),l.jsx(b("MPNHeaderActionButton.react"),{label:i._("close"),onPress:function(){var b;return(b=a.props.ActionDelegate)==null?void 0:b.minimize()},children:l.jsx(b("MPNMinusButtonSVG.react"),{})})]})]}),l.jsxs(b("FlexLayout.react"),{align:"center",className:"_9099",children:[l.jsx(b("LineClamp.react"),{lines:1,children:l.jsx("strong",{children:q})}),f&&f!=="not_verified"?l.jsx("span",{className:"lcfup58g",children:l.jsx(b("MPNVerifiedBadge.react"),{verificationStatus:f,size:18})}):null]}),l.jsx(b("LineClamp.react"),{className:"_909a",lines:1,children:k.pageResponsiveness}),l.jsx(b("LineClamp.react"),{className:"_909b",lines:3,children:c?k.loggedInGreeting:k.loggedOutGreeting}),this.props.useITPContinueButton?this.$4():this.$5(d),l.jsx("div",{className:"_924l",children:this.props.useITPContinueButton?null:d?m?h?i._("By continuing as a guest, you agree to Facebook's {=Terms}. Learn how we collect, use and share your data in our {=Data Policy} and how we use cookies and similar technology in our {=Cookies Policy}.",[i._param("=Terms",l.jsx(b("CometLink.react"),{href:n,target:"_blank",children:i._("Terms")})),i._param("=Data Policy",l.jsx(b("CometLink.react"),{href:o,target:"_blank",children:i._("Data Policy")})),i._param("=Cookies Policy",l.jsx(b("CometLink.react"),{href:p,target:"_blank",children:i._("Cookies Policy")}))]):i._("By continuing as a guest, you agree to Facebook's {=Terms}. Learn how we collect, use and share your data in our {=Data Policy} and how we use cookies and similar technology in our {=Cookies Policy}. If you choose to log in, {pageName} will see the website you came from and info you've made public on your Facebook profile.",[i._param("=Terms",l.jsx(b("CometLink.react"),{href:n,target:"_blank",children:i._("Terms")})),i._param("=Data Policy",l.jsx(b("CometLink.react"),{href:o,target:"_blank",children:i._("Data Policy")})),i._param("=Cookies Policy",l.jsx(b("CometLink.react"),{href:p,target:"_blank",children:i._("Cookies Policy")})),i._param("pageName",e)]):h?i._("By continuing as a guest, you agree to Facebook's {=Terms}, {=Data Policy} and {=Cookies Policy}.",[i._param("=Terms",l.jsx(b("CometLink.react"),{href:n,target:"_blank",children:i._("Terms")})),i._param("=Data Policy",l.jsx(b("CometLink.react"),{href:o,target:"_blank",children:i._("Data Policy")})),i._param("=Cookies Policy",l.jsx(b("CometLink.react"),{href:p,target:"_blank",children:i._("Cookies Policy")}))]):i._("By continuing as a guest, you agree to Facebook's {=Terms}, {=Data Policy} and {=Cookies Policy}. If you choose to log in, {pageName} will see the website you came from and info you've made public on your Facebook profile.",[i._param("=Terms",l.jsx(b("CometLink.react"),{href:n,target:"_blank",children:i._("Terms")})),i._param("=Data Policy",l.jsx(b("CometLink.react"),{href:o,target:"_blank",children:i._("Data Policy")})),i._param("=Cookies Policy",l.jsx(b("CometLink.react"),{href:p,target:"_blank",children:i._("Cookies Policy")})),i._param("pageName",e)]):h?null:i._("If you choose to log in, {pageName} will see the website you came from and info you've made public on your Facebook profile.",[i._param("pageName",e)])})]})})})};d.$6=function(){var a,c=b("MPNIdentity").MPNIdentity.currentUserState()==b("MPNIdentity").MPNIdentityState.FB;a=(a=b("MPNIdentity").MPNIdentity.currentUser())==null?void 0:a.shortName;if(!c)if(this.context.state.shouldUseChatInMessengerCTA)return i._("Chat in Messenger");else return i._("Log into Messenger");return a!==null?i._("Continue as {first name}",[i._param("first name",a)]):i._("Continue")};d.$5=function(a){var c=this.context.state.threadCSSColor,d=this.context.state.shouldRemoveLoggedinLegalText,e=b("MPNIdentity").MPNIdentity.currentUserState()==b("MPNIdentity").MPNIdentityState.FB;e=b("gkx")("1189683");e=!a&&!e&&d;d=a?l.jsx(b("ShimButton.react"),{"data-testid":void 0,onClick:this.$7,className:"_909e",children:l.jsx(b("LineClamp.react"),{lines:1,children:i._("Continue as Guest")})}):null;return l.jsxs("div",{className:(e?"":"_909c")+(e?" _9ihg":""),children:[l.jsxs(b("ShimButton.react"),{"data-testid":void 0,onClick:this.$8.bind(this),className:"_909d",style:{backgroundColor:c},children:[l.jsx(b("MPNMessengerIconSVG.react"),{}),l.jsx(b("EllipsisText.react"),{className:"continueText",children:this.$6()})]}),d]})};d.$8=function(){var a=this,c=this.context,d=c.state,e=c.dispatchAction;c=d.pageID;var f=d.hasGuestMode,g=d.pagePassesSentryTest;d=d.hasMessagingPermission;var h=b("MPNIdentity").MPNIdentity.currentUserState(),i=b("MPNIdentity").MPNIdentity.currentUserID();e({type:"UPDATE_CONTINUE_CLICK_TIME",continueClickTime:(k||(k=b("performanceAbsoluteNow")))()});if(h==b("MPNIdentity").MPNIdentityState.FB&&i!=null){if(!g&&!d){(h=this.props.ActionDelegate)==null?void 0:h.openThreadWithInterstitial(function(){var c;(c=a.props.ActionDelegate)==null?void 0:c.openThreadWithCurrentFBUser();b("MPNNavigation").navigateToRoute(a.props.history,b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW);e({type:"UPDATE_BLOCK_STATUS",isPageBlocked:!1})});return}b("MPNNavigation").navigateToRoute(this.props.history,b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW);(i=this.props.ActionDelegate)==null?void 0:i.openThreadWithCurrentFBUser();b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",null,c,f?"welcome_page_with_guest_option":"welcome_page",{button_name:"continue_as"});return}b("MPNIdentity").MPNIdentity.performUIAction(function(){if(b("MPNIdentity").MPNIdentity.cookieUserUncached()!="0")return;b("MPNIdentity").MPNIdentity.subscribeLoggedInUserChanges(function(a,c){a=b("MPNStorage").getFBStorageState();if(a!=null){b("MPNStorage").setFBStorageState(babelHelpers["extends"]({},a,{chatState:b("MPNLocalState").MPNChatState.LOGGED_IN_CHAT_STARTED,rdr:b("MPNConstants").MPNRedirect.FB_LOG_IN}));c={path:b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW,chatState:b("MPNLocalState").MPNChatState.LOGGED_IN_CHAT_STARTED,visibility:"not-hidden"};b("MPNStorage").setThirdPartyStorageState(c)}},m);a.$9(!1,!1)},function(){if(b("MPNIdentity").MPNIdentity.cookieUserUncached()!="0"){b("MPNXDMessageManager").reloadPlugin();return}b("MPNIdentity").MPNIdentity.subscribeLoggedInUserChanges(function(a,c){a=b("MPNStorage").getFBStorageState();a!=null&&b("MPNStorage").setFBStorageState(babelHelpers["extends"]({},a,{chatState:b("MPNLocalState").MPNChatState.LOGGED_IN_CHAT_STARTED,rdr:b("MPNConstants").MPNRedirect.FB_LOG_IN}))},m);a.$9(!1,!1)},function(){var a=b("XChatPluginDesktopIncognitoLoginPopupController").getURIBuilder().getURI();b("PopupWindow").open(a.toString(),420,450)});b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",null,c,f?"welcome_page_with_guest_option":"welcome_page",{button_name:"log_in_messenger"})};d.$9=function(a,c){var d=this.context.state,e=d.refererUri,f=d.pageID,g=d.initialRequestUri;d=d.requestID;new(b("PluginOptin"))("customer_chat").addLoginParams({logged_in:a,page_id:f,switch_user:c,request_id:d}).addReturnParams((a=g==null?void 0:g.getQueryData())!=null?a:{}).addReturnParams({customer_chat_origin_uri:e,referer_uri:e}).start()};d.$4=function(){var a=this.context.state.threadCSSColor;return l.jsx("div",{className:"_909c",children:l.jsx(b("ShimButton.react"),{onClick:this.$11,className:"_909d",style:{backgroundColor:a},children:l.jsx(b("LineClamp.react"),{className:"continueText",lines:1,children:i._("Continue")})})})};d.$1=function(a){var c=b("ReactDOM").findDOMNode(this.modalSheetRef.current);if(c instanceof HTMLElement){a=a?b("LiveChatPluginConstants").WELCOME_PAGE_GUEST_FALLBACK_HEIGHT:b("LiveChatPluginConstants").WELCOME_PAGE_NO_GUEST_FALLBACK_HEIGHT;c=Math.max(c.offsetHeight,a);a=c+b("LiveChatPluginConstants").WELCOME_PAGE_PADDING_HEIGHT;b("MPNXDMessageManager").resizeIframe(a.toString())}};d.$3=function(a){a.stopPropagation()};return c}(l.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopITPContinuePage.react",["LiveChatPluginLoggerUtil","MessagingPluginContext","MPNDesktopWelcomePageModal.react","MPNXDMessageManager","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this.context.state,c=a.alignment,d=a.bottomSpacing,e=a.pageID;a=a.pluginMountTime;b("MPNXDMessageManager").setupDesktopIframe(c,d);b("LiveChatPluginLoggerUtil").logImpressionFromNewUI("tab_impression",e,"itp_page",a,["continue"])};d.render=function(){try{return g.jsx(b("MPNDesktopWelcomePageModal.react"),{ActionDelegate:this.props.ActionDelegate,history:this.props.history,useITPContinueButton:!0})}catch(a){b("LiveChatPluginLoggerUtil").logImpressionExceptionsFromNewUI("tab_load_failure",this.context.state.pageID,"itp_page",a.name,a.message,a.stack)}};return c}(g.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopIcon.react",["ClickableArea.react","LiveChatPluginDefaultMessengerIconSVG.react","LiveChatPluginLoggerUtil","LiveChatPluginMessengerIconSVGWithColor.react","MPNXDMessageManager","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={visibility:d.props.initialVisibility,disabled:!1},d.$1=function(a){a=((a=a.data.params)==null?void 0:a.is_dialog_hidden)==!0?"hidden":"not-hidden";d.setState({visibility:a})},d.$2=function(){if(d.state.disabled==!0)return;else b("MPNXDMessageManager").fetchThirdPartyState(function(a){a=(a=a==null?void 0:(a=a.params)==null?void 0:a.visibility)!=null?a:d.state.visibility;var b=a=="hidden"?"not-hidden":"hidden";a=="not-hidden"?d.props.actionDelegate.minimize():d.props.actionDelegate.maximize();d.setState({visibility:b})}),d.setState({disabled:!0}),window.setTimeout(function(){d.setState({disabled:!1})},350)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("LiveChatPluginLoggerUtil").logImpressionFromNewUI("tab_impression",this.props.pageID,"plugin_icon",this.props.pluginRequestTime,null,null,null,null,null,null,this.props.clientRequestTime),b("MPNXDMessageManager").subscribeEvent("desktop-icon","message","CustomerChat.isDialogHidden",this.$1)};d.render=function(){return g.jsx(b("ClickableArea.react"),{"data-testid":void 0,onClick:this.$2,children:g.jsx("svg",{width:"60px",height:"60px",viewBox:"0 0 60 60",cursor:"pointer",children:this.props.threadColor!=null?g.jsx(b("LiveChatPluginMessengerIconSVGWithColor.react"),{threadColor:this.props.threadColor}):g.jsx(b("LiveChatPluginDefaultMessengerIconSVG.react"),{})})})};return c}(g.Component);e.exports=a}),null);
__d("MPNDesktopMessageComposer.react",["cx","fbt","AbstractTextInput.react","JSResource","Keys","LiveChatPluginAttachmentUploadError","LiveChatPluginLoggerUtil","LiveChatPluginMessageComposerAttachmentShelf.react","LiveChatPluginSendButtonSVG.react","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MessagingPluginContext","MPNDesktopBotMenuButton.react","MPNDesktopGuestAttachmentButton.react","MPNIdentity","MPNLocalState","MPNPaperclipIconSVG.react","React","ShimButton.react","StickerConstants","Tooltip.react","lazyLoadComponent","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("lazyLoadComponent")(b("JSResource")("MPNDesktopAttachmentInput.react").__setRef("MPNDesktopMessageComposer.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this,c,d)||this;e.state={attachmentsDataMap:new Map(),error:b("LiveChatPluginAttachmentUploadError").NO_ERROR,inputValue:"",uploadingAttachments:new Set()};e.$19=function(a){e.props.onChange(),e.setState({error:b("LiveChatPluginAttachmentUploadError").NO_ERROR,inputValue:a.target.value})};e.$20=function(a){a.keyCode===b("Keys").RETURN&&(a.preventDefault(),e.$18())};e.$18=function(){var a=b("MPNIdentity").MPNIdentity.currentUserState();a===b("MPNIdentity").MPNIdentityState.FB?e.$21():a===b("MPNIdentity").MPNIdentityState.GUEST&&e.$22()};e.$17=function(){var a=e.context.state.pageID,c=e.$7.constructStickerMessageObject(b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,"source:discovery:customer_chat_plugin",e.$8,e.$9);c.is_like_preview=!0;e.$6.send(c);e.setState({error:b("LiveChatPluginAttachmentUploadError").NO_ERROR,inputValue:""});b("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",b("MPNIdentity").MPNIdentity.currentUserID(),a,"logged_in_chat_tab")};e.$11=function(a){e.$2&&e.$2.removeAttachment(a)};e.$15=function(a){e.setState({error:a})};e.$16=function(a,c,d,f,g,h){d&&(e.$1=d),f&&(e.$3=f),g&&(e.$4=g),h&&(e.$10=h),e.setState({attachmentsDataMap:new Map(a),error:b("LiveChatPluginAttachmentUploadError").NO_ERROR,uploadingAttachments:new Set(c)}),e.focus()};c=e.context.state.pageID;d=b("MPNIdentity").MPNIdentity.currentUserID();if(d==null)return babelHelpers.assertThisInitialized(e);e.$6=b("MercuryMessageActions").getForFBID(d);e.$7=b("MercuryMessageObject").getForFBID(d);e.$8=b("MercuryIDs").getThreadIDFromUserID(c);e.$9=b("LiveChatPluginLoggerUtil").getAttributionTags();e.$1=[];e.$3=[];e.$4=[];e.$10=[];return e}var d=c.prototype;d.componentDidMount=function(){this.context.state.shouldEnableFunnelImprovement&&this.focus()};d.render=function(){return i.jsxs("div",{className:(this.context.state.isComposerDisabled?"_664i":"")+" _94vs",children:[i.jsx(b("LiveChatPluginMessageComposerAttachmentShelf.react"),{attachments:this.state.attachmentsDataMap,error:this.state.error,removeAttachment:this.$11,threadColor:this.context.state.threadColor,uploadingAttachments:this.state.uploadingAttachments}),i.jsxs("div",{className:"_94vt",children:[this.$12(),this.$13(),this.$14()]})]})};d.$12=function(){var a=this,c=this.context.state,d=c.isComposerDisabled,e=c.optimisticStorageState;c=c.showUpgradeUpsellPrompt;if(d||e.chatState===b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED)return null;if(b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.GUEST)if(c===!0)return i.jsx(b("MPNDesktopGuestAttachmentButton.react"),{threadColor:this.context.state.threadCSSColor});else return null;d=b("MPNIdentity").MPNIdentity.currentUserID();return d==null?null:i.jsx(i.Suspense,{fallback:i.jsx("div",{className:"_95jj",children:i.jsx(b("MPNPaperclipIconSVG.react"),{color:this.context.state.threadCSSColor})}),children:i.jsx(j,{pageID:this.context.state.pageID,ref:function(b){a.$2=b},setComposerAttachmentError:this.$15,updateComposerAttachmentsAndIDs:this.$16,viewerID:d})})};d.$14=function(){var a=this.context.state,c=a.isComposerDisabled;a=a.threadCSSColor;var d=this.state.inputValue.length===0&&this.state.attachmentsDataMap.size===0;return d||c?i.jsx(b("MPNDesktopBotMenuButton.react"),{onClick:this.props.onClick,onLikeClick:this.$17}):i.jsx(b("Tooltip.react"),{tooltip:"Send",children:i.jsx(b("ShimButton.react"),{"aria-label":h._("Send"),className:"_4bqf _95jk _9jru","data-testid":void 0,onClick:this.$18,children:i.jsx(b("LiveChatPluginSendButtonSVG.react"),{threadColor:a})})})};d.$13=function(){var a=this,c=this.context.state,d=c.pageName;c=c.isComposerDisabled;var e=b("gkx")("1755315");e=e?h._("Typing is disabled for this conversation."):h._("{page name} disabled typing.",[h._param("page name",d)]);return c?i.jsx("div",{className:"_664k",children:e}):i.jsx("div",{className:"_94vv",children:i.jsx(b("AbstractTextInput.react"),{"data-testid":void 0,onBlur:this.props.onBlur,onChange:this.$19,onClick:this.props.onClick,onFocus:this.props.onFocus,onKeyDown:this.$20,ref:function(b){a.$5=b},placeholder:h._("Ask a question...").toString(),value:this.state.inputValue})})};d.$22=function(){var a=this.context.state;if(!a.messageStore||!a.messageStore.sendQueue)return;var c=a.messageStore.sendQueue,d=this.state.inputValue.trim();d&&d.length>0&&c.enqueueAndSend(d,null);this.setState({inputValue:""});b("LiveChatPluginLoggerUtil").logActionFromNewUI("message_send",a.guestID,a.pageID,"guest_chat_tab")};d.$21=function(){var a=this.context.state.pageID,c=b("MPNIdentity").MPNIdentity.currentUserID();if(this.state.uploadingAttachments.size!==0)return;var d=this.state.inputValue.trim();if(d&&d.length>0||this.state.attachmentsDataMap.size>0){d=this.$7.constructUserGeneratedMessageObject(d,"source:discovery:customer_chat_plugin",this.$8,null,null,this.$9);this.$4.length>0&&(d.has_attachment=!0,d.image_ids=this.$4);this.$1.length>0&&(d.has_attachment=!0,d.gif_ids=this.$1);this.$10.length>0&&(d.has_attachment=!0,d.video_ids=this.$10);this.$3.length>0&&(d.has_attachment=!0,d.file_ids=this.$3);this.$6.send(d);this.setState({inputValue:""});this.$23();b("LiveChatPluginLoggerUtil").logAction("customer_chat_message_sent",c,a,this.state.attachmentsDataMap.size>0?JSON.stringify({attachments:Array.from(this.state.attachmentsDataMap.keys())}):null);b("LiveChatPluginLoggerUtil").logActionFromNewUI("message_send",c,a,"logged_in_chat_tab")}};d.$23=function(){this.$2&&this.$2.removeAllAttachments()};d.focus=function(){this.$5&&this.$5.focusInput()};return c}(i.PureComponent);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopThreadPage.react",["cx","JSResource","LiveChatPluginConstants","LiveChatPluginLoggerUtil","MessagingPluginContext","MPNDesktopDialogHeader.react","MPNEndChatPrompt.react","lazyLoadComponent","MessengerSpinner.react","MPNDesktopGuestUpgradeUpsellPrompt.react","MessengerState.bs","MPNBlockedPageComposer.react","MPNLocalState","MPNDesktopMessageComposer.react","MPNXDMessageManager","MPNConstants","React","UnverifiedXD","MPNIdentity","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h=b("lazyLoadComponent")(b("JSResource")("MessagingPluginDialogBody.react").__setRef("MPNDesktopThreadPage.react")),i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={dialogBodyHeight:-1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=b("LiveChatPluginConstants").THREAD_PAGE_HEIGHT+b("LiveChatPluginConstants").THREAD_PAGE_PADDING_HEIGHT;b("MPNXDMessageManager").resizeIframe(a.toString())};d.render=function(){var a=this,c=this.context.state,d=c.optimisticStorageState,e=c.pageID,f=c.isPageBlocked,g=c.showUpgradeUpsellPrompt;c=c.shouldEnableFunnelImprovement;var j=b("MPNIdentity").MPNIdentity.currentUserID(),k=b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.GUEST;try{return i.jsx("div",{role:"none",className:"_94vg",children:i.jsx("div",{className:d.chatState===b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED?"_91hz":"",children:i.jsxs("div",{className:"_94vh",children:[i.jsx(b("MPNDesktopDialogHeader.react"),{ActionDelegate:this.props.ActionDelegate,history:this.props.history}),i.jsxs("div",{className:"_424s",children:[c&&d.chatState===b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED&&i.jsx("div",{className:"spinner",children:i.jsx(b("MessengerSpinner.react"),{color:"blue",size:b("MessengerSpinner.react").large_size})}),i.jsx(i.Suspense,{fallback:i.jsx("div",{className:"spinner",children:i.jsx(b("MessengerSpinner.react"),{color:"blue",size:b("MessengerSpinner.react").large_size})}),children:d.chatState!==b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED&&i.jsx(b("MessengerState.bs").jsComponent,{fbid:j,children:function(c){return i.jsx(h,{deliveryReceipt:b("MessengerState.bs").deliveryReceipts(c),dialogBodyHeight:a.state.dialogBodyHeight,messengerState:c,readReceipt:null,sendRef:function(){}})}})})]}),d.showUpgradePrompt==null||d.showUpgradePrompt===b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN||!g?null:i.jsx(b("MPNDesktopGuestUpgradeUpsellPrompt.react"),{color:this.context.state.threadCSSColor,prompt:this.context.state.optimisticStorageState.showUpgradePrompt,history:this.props.history}),i.jsx(b("MPNEndChatPrompt.react"),{isGuest:k,history:this.props.history,shouldMinimize:!1}),f&&d.chatState===b("MPNLocalState").MPNChatState.LOGGED_IN_CHAT_STARTED?i.jsx(b("MPNBlockedPageComposer.react"),{}):i.jsx(b("MPNDesktopMessageComposer.react"),{onBlur:this.$2()?this.$3:b("emptyFunction"),onChange:function(){},onClick:function(){},onFocus:this.$2()?this.$4:b("emptyFunction"),ref:function(b){return a.$1=b}})]},"dialog_container")})})}catch(a){b("LiveChatPluginLoggerUtil").logImpressionExceptionsFromNewUI("tab_load_failure",e,b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",a.name,a.message,a.stack)}};d.$2=function(){return/iPhone|iPad|iPod/.test(navigator.userAgent)};d.$4=function(){b("UnverifiedXD").send({type:"liveChatPluginFocusComposer"})};d.$3=function(){b("UnverifiedXD").send({type:"liveChatPluginBlurComposer"})};return c}(i.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopWelcomePage.react",["LiveChatPluginLoggerUtil","MessagingPluginContext","MPNDesktopWelcomePageModal.react","MPNIdentity","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this.context.state,c=a.pageID,d=a.pluginMountTime;a=a.hasGuestMode;var e=b("MPNIdentity").MPNIdentity.currentUserState()==b("MPNIdentity").MPNIdentityState.FB;b("LiveChatPluginLoggerUtil").logImpressionFromNewUI("tab_impression",c,a?"welcome_page_with_guest_option":"welcome_page",d,a?[e?"continue_as":"chat_in_messenger","continue_as_guest"]:["chat_in_messenger"])};d.render=function(){try{return g.jsx(b("MPNDesktopWelcomePageModal.react"),{ActionDelegate:this.props.ActionDelegate,history:this.props.history,useITPContinueButton:!1})}catch(d){var a=this.context.state,c=a.pageID;a=a.hasGuestMode;b("LiveChatPluginLoggerUtil").logImpressionExceptionsFromNewUI("tab_load_failure",c,a?"welcome_page_with_guest_option":"welcome_page",d.name,d.message,d.stack)}};return c}(g.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopRoute.react",["MessagingPluginPathUtils","MPNDesktopITPContinuePage.react","MPNDesktopThreadPage.react","MPNDesktopWelcomePage.react","React","ReactRouterDOM"],(function(a,b,c,d,e,f){e.exports=a;var g=b("React");function a(a){var c=a.path,d=a.ActionDelegate;return g.jsx((a=b("ReactRouterDOM")).BrowserRouter,{children:g.jsxs(a.Switch,{children:[g.jsx(a.Route,{render:function(a){return g.jsx(b("MPNDesktopWelcomePage.react"),babelHelpers["extends"]({},a,{ActionDelegate:d}))},exact:!0,path:b("MessagingPluginPathUtils").MPN_PATH.WELCOME}),g.jsx(a.Route,{render:function(a){return g.jsx(b("MPNDesktopITPContinuePage.react"),babelHelpers["extends"]({},a,{ActionDelegate:d}))},exact:!0,path:b("MessagingPluginPathUtils").MPN_PATH.ITPCONTINUE}),g.jsx(a.Route,{render:function(a){return g.jsx(b("MPNDesktopThreadPage.react"),babelHelpers["extends"]({},a,{ActionDelegate:d}))},exact:!0,path:b("MessagingPluginPathUtils").MPN_PATH.THREAD}),g.jsx(a.Redirect,{to:c})]})})}}),null);
__d("MPNDesktopWrapper.react",["Arbiter","AsyncRequest","Bootloader","CreateCustomerChatPluginGuestUserMutation","LiveChatMqttClient","LiveChatPluginConstants","LiveChatPluginLoggerUtil","LiveChatPluginMessengerIconSVGWithColor.react","LiveChatPluginUtils","MessagingPluginContext","MessagingPluginGuestUpgradeActions","MessagingPluginPathUtils","MPNConstants","MPNDesktopIcon.react","MPNDesktopRoute.react","MPNIdentity","MPNLocalState","MPNNavigation","MPNStorage","MPNUnreadCountBadge.react","MPNXDMessageManager","Plugin","PluginOptin","React","ReactDOM","XMNPlatformCustomerChatPluginOpenThreadController"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h={NONE:0,CREATE_GUEST_SESSION:1,START_NEW_THREAD:2,GUEST_UPGRADE:3,GUEST_UPGRADE_SWITCH_ACCOUNT:4};a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.actionOnInit=h.NONE;d.iconIframeLoaded=!1;d.unreadCountIframeLoaded=!1;d.$2=null;d.initialPath=d.$5();d.props.redirectCommand==b("MPNConstants").MPNRedirect.NEW_GUEST_SESSION?d.actionOnInit=h.CREATE_GUEST_SESSION:d.props.redirectCommand==b("MPNConstants").MPNRedirect.FB_LOG_IN?d.actionOnInit=h.START_NEW_THREAD:d.props.redirectCommand==b("MPNConstants").MPNRedirect.GUEST_UPGRADE?d.actionOnInit=h.GUEST_UPGRADE:d.props.redirectCommand===b("MPNConstants").MPNRedirect.GUEST_UPGRADE_SWITCH_ACCOUNT&&(d.actionOnInit=h.GUEST_UPGRADE_SWITCH_ACCOUNT);d.ActionDelegate={onContinueAsGuest:d.onContinueAsGuest.bind(babelHelpers.assertThisInitialized(d)),openThreadWithCurrentFBUser:d.openThreadWithCurrentFBUser.bind(babelHelpers.assertThisInitialized(d)),openThreadWithInterstitial:d.openThreadWithInterstitial.bind(babelHelpers.assertThisInitialized(d)),onChatInMessenger:function(){},minimize:function(){b("MPNNavigation").minimizePlugin(d.context,!1)},maximize:function(){b("MPNNavigation").maximizePlugin(d.context,!1)}};d.$1=window.name;return d}var d=c.prototype;d.$5=function(){var a=this.props.redirectCommand;return a==b("MPNConstants").MPNRedirect.NEW_GUEST_SESSION||a==b("MPNConstants").MPNRedirect.FB_LOG_IN?b("MessagingPluginPathUtils").MPN_PATH.THREAD:this.props.path};d.componentDidMount=function(){var a=this.context.state,c=a.alignment;a=a.bottomSpacing;this.$6();b("MPNXDMessageManager").setupDesktopIframe(c,a);this.$7();this.$8()};d.componentWillUnmount=function(){this.$3&&window.clearTimeout(this.$3),this.$4&&window.clearTimeout(this.$4)};d.componentDidUpdate=function(){this.$8()};d.$8=function(){var a=this,c=this.context.state,d=c.optimisticStorageState,e=c.pageID,f=c.pageName;c=c.accessToken;var g=b("MPNIdentity").MPNIdentity.currentUserID();if(this.$2==g||d.chatState===b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED||g==null)return;d=b("MPNIdentity").MPNIdentity.currentUserState();d===b("MPNIdentity").MPNIdentityState.FB&&(b("LiveChatMqttClient").setUp(e,g,null,function(){return a.$2=g}),b("Bootloader").loadModules(["LiveChatPluginAlerts","MercurySyncDeltaHandler"],function(a,c){a.init(g,e,f,new Map(),!1,0),c.getForFBID(g),b("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:g,seqID:0})},"MPNDesktopWrapper.react"));d===b("MPNIdentity").MPNIdentityState.GUEST&&(c!=null&&(b("LiveChatMqttClient").setUp(e,g,null,null,c),this.$2=g))};d.$6=function(){var a=this,c=this.context.state,d=c.alignment;c=c.bottomSpacing;var e=this.context.state,f=null;e.shouldEnableFunnelImprovement&&(f=g.jsx(b("LiveChatPluginMessengerIconSVGWithColor.react"),{threadColor:e.threadCSSColor}));b("MPNXDMessageManager").setupIconIframe(this.$1,d,c,f);b("MPNXDMessageManager").subscribeEvent("plugin_wrapper","message","bubbleFrameLoaded",function(c){try{if(c.data.frameName!=null&&!a.iconIframeLoaded){var d=g.jsx(b("MPNDesktopIcon.react"),{threadColor:e.threadCSSColor,actionDelegate:a.ActionDelegate,pageID:e.pageID,pluginRequestTime:e.serverTime,initialVisibility:e.optimisticStorageState.visibility,clientRequestTime:e.clientRequestTime}),f=parent.frames[c.data.frameName].document.body;b("ReactDOM").render(d,f);a.iconIframeLoaded=!0}if(c.data.unreadCountFrameName!=null){d=g.jsx(b("MPNUnreadCountBadge.react"),{});f=parent.frames[c.data.unreadCountFrameName].document.body;b("ReactDOM").render(d,f);a.unreadCountIframeLoaded=!0}a.$9()}catch(d){b("LiveChatPluginLoggerUtil").logImpressionExceptionsFromNewUI("tab_load_failure",a.context.state.pageID,"plugin_icon",d.name,d.message,d.stack,JSON.stringify({eventData:c.data,unreadCountIframeLoaded:a.unreadCountIframeLoaded,iconIframeLoaded:a.iconIframeLoaded}))}})};d.$9=function(){var a=this,c=this.context.state,d=c.greetingDialogDelay,e=c.greetingDialogDisplay;c=c.isInitialLoad;if(!c)return;c=!1;var f=0,g=d;switch(e){case"show":case"unset":c=d>0;break;case"fade":c=d>0;g=d;f=b("LiveChatPluginConstants").PLUGIN_FADE_DELAY;break;case"hide":c=!1;break;default:break}if(!c)return;this.$3=window.setTimeout(function(){a.$10(f)},g)};d.$10=function(a){var c=this;this.context.state.optimisticStorageState.visibility==="hidden"&&(b("MPNNavigation").maximizePlugin(this.context,!1),a&&(this.$4=window.setTimeout(function(){c.context.state.optimisticStorageState.visibility!=="hidden"&&b("MPNNavigation").minimizePlugin(c.context,!1)},a)))};d.$7=function(){var a=this;b("MPNXDMessageManager").subscribeEvent("plugin_wrapper","message","CustomerChat.SDK.Called",function(c){var d=a.context.state,e=d.pageID,f=d.greetingDialogDelay,g=d.threadCSSColor,h=d.loggedInGreeting;d=d.loggedOutGreeting;c=b("LiveChatPluginLoggerUtil").EVENTMAP[c.data.event];b("LiveChatPluginLoggerUtil").logImpressionEvents(c,e,JSON.stringify({greetingDialogDelay:f}),g,h,d)});b("MPNXDMessageManager").subscribeEvent("plugin_wrapper","message","updateCustomerChat",function(c){var d=a.context,e=d.state;d=d.dispatchAction;var f=e.loggedInGreeting,g=e.loggedOutGreeting;e=e.refParam;try{c=(c=c.data)==null?void 0:(c=c.message)==null?void 0:c.params;if(c==null)return;c=JSON.parse(c);var h=b("LiveChatPluginUtils").getSanitizedGreetingText(c.logged_in_greeting),i=b("LiveChatPluginUtils").getSanitizedGreetingText(c.logged_out_greeting);d({type:"SDK_UPDATE",loggedInGreeting:(d=h)!=null?d:f,loggedOutGreeting:(h=i)!=null?h:g,refParam:(d=c.ref)!=null?d:e})}catch(a){}});b("MPNXDMessageManager").subscribeEvent("plugin_wrapper","message","CustomerChat.isDialogHidden",function(c){c=((c=c.data.params)==null?void 0:c.is_dialog_hidden)==!0?"hidden":"not-hidden";b("MPNStorage").setVisibility(c);a.context.dispatchAction({type:"UPDATE_DIALOG_VISIBILITY",dialogVisibility:c})})};d.render=function(){this.actionOnInit==h.CREATE_GUEST_SESSION?(this.actionOnInit=h.NONE,this.onContinueAsGuest(function(){b("MPNStorage").clearRedirectCommand()})):this.actionOnInit==h.START_NEW_THREAD?(this.actionOnInit=h.NONE,b("MPNStorage").clearRedirectCommand(),this.openThreadWithCurrentFBUser()):this.actionOnInit==h.GUEST_UPGRADE?(this.actionOnInit=h.NONE,b("MPNStorage").clearRedirectCommand(),b("MessagingPluginGuestUpgradeActions").clearGuestStorage(this.context),b("MessagingPluginGuestUpgradeActions").setPluginStateToUpgradedThread(this.context)):this.actionOnInit==h.GUEST_UPGRADE_SWITCH_ACCOUNT&&(this.actionOnInit=h.NONE,b("MPNStorage").clearRedirectCommand(),b("MPNIdentity").MPNIdentity.subscribeLoggedInUserChanges(function(a,c){a=b("MPNStorage").getFBStorageState();a!=null&&b("MPNStorage").setFBStorageState(babelHelpers["extends"]({},a,{rdr:b("MPNConstants").MPNRedirect.GUEST_UPGRADE}));b("MPNXDMessageManager").reloadPlugin()},250));return this.context.state.optimisticStorageState.visibility=="not-hidden"||this.iconIframeLoaded?g.jsx(b("MPNDesktopRoute.react"),{path:this.initialPath,ActionDelegate:this.ActionDelegate}):null};d.$11=function(){var a=b("MPNStorage").getFBStorageState(),c=b("MPNIdentity").MPNIdentity.currentUserID();if(a==null||c==null)return;var d={path:b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW,chatState:b("MPNLocalState").MPNChatState.LOGGED_IN_CHAT_STARTED,visibility:"not-hidden"};b("MPNStorage").setFBStorageState(babelHelpers["extends"]({},a,{currentPath:d.path,chatState:d.chatState,userID:c}));b("MPNStorage").setThirdPartyStorageState(d);this.context.dispatchAction({type:"START_CHAT",optimisticStorageState:d})};d.openThreadWithCurrentFBUser=function(){var a=this.context.state,c=a.pageID,d=a.requestID,e=a.refParam,f=a.refererUri;a=a.locale;c=b("XMNPlatformCustomerChatPluginOpenThreadController").getURIBuilder().setFBID("page_id",c).setString("ref",e).setString("referer_uri",f).setString("request_id",d).setString("locale",a).getRequest_LEGACY_UNTYPED(new(b("AsyncRequest"))());c.setAllowCrossPageTransition(!0).setMethod("POST").send();this.$11()};d.openThreadWithInterstitial=function(a){var c=this,d=this.context.state,e=d.pageID;d=d.requestID;new(b("PluginOptin"))("customer_chat").addLoginParams({logged_in:!0,page_id:e,request_id:d,switch_user:!1}).start();b("Arbiter").subscribeOnce(b("Plugin").CONNECT,function(){c.$11(),a!=null&&a()})};d.onContinueAsGuest=function(a){var c=this.context,d=c.state,e=c.dispatchAction,f=d.pageID,g=d.locale,h=d.requestID;b("CreateCustomerChatPluginGuestUserMutation").commit({input:{page_id:f,locale:g}},{onSuccess:function(c){var i,j;i=(i=c.create_customer_chat_plugin_guest_user)==null?void 0:i.session_key;j=(j=c.create_customer_chat_plugin_guest_user)==null?void 0:j.fbid;c=(c=c.create_customer_chat_plugin_guest_user)==null?void 0:c.access_token;if(i!=null&&j!=null&&c!=null){i=b("MPNStorage").getFBStorageState();var k={path:b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW,chatState:b("MPNLocalState").MPNChatState.GUEST_CHAT_STARTED,visibility:"not-hidden",showUpgradePrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN};if(i!=null){var l=Date.now()+b("LiveChatPluginConstants").GUEST_SESSION_STORAGE_VALIDITY_MS;b("MPNStorage").setFBStorageState(babelHelpers["extends"]({},i,{currentPath:k.path,chatState:k.chatState,userID:j,accessToken:c,expirationTimestamp:l,showUpgradePrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN}))}b("MPNIdentity").MPNIdentity.changeIdentityToGuest(j,c);e({type:"START_CHAT",optimisticStorageState:k,accessToken:c,guestID:j});i=b("XMNPlatformCustomerChatPluginOpenThreadController").getURIBuilder().setFBID("page_id",f).setString("ref",d.refParam).setString("referer_uri",d.refererUri).setString("request_id",h).setString("access_token",c).setString("locale",g).getRequest_LEGACY_UNTYPED(new(b("AsyncRequest"))());i.setAllowCrossPageTransition(!0).setMethod("POST").send();a(j,c)}},onFailure:function(a){b("MPNStorage").clearFBStorageState(),b("MPNStorage").clearThirdPartyStorageState(),b("MPNXDMessageManager").reloadPlugin()}})};return c}(g.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MessagingPluginDesktopRoot",["cx","CometBlueBridgeKeyCommandListener.react","LiveChatPluginErrorBoundary.react","MessagingPluginPathUtils","MessagingPluginStateProvider","MPNCacheVersioning","MPNConstants","MPNDesktopWrapper.react","MPNIdentity","MPNLocalState","MPNStorage","MPNXDMessageManager","React","ReactDOM","URI","gkx","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("React");a=function(){function a(a){var b=a.alignment,c=a.pageID,d=a.container,e=a.serverTime,f=a.clientRequestTime,g=a.pagePassesSentryTest,h=a.hasMessagingPermission,i=a.isMuted,j=a.isPageBlocked,k=a.isBusinessActive,l=a.requestID,m=a.refererUri,n=a.originDomain,o=a.soundURLs,p=a.hasGuestMode,q=a.showUpgradeUpsellPrompt,r=a.hasAutomation,s=a.shouldEnableFunnelImprovement,t=a.shouldRemoveLoggedinLegalText,u=a.shouldUseChatInMessengerCTA,v=a.appSwitchUri,w=a.upgradeAppSwitchUri,x=a.storedStates,y=a.isComposerDisabled,z=a.hasPersistentMenu,A=a.pageName,B=a.pageProfilePictureUri,C=a.viewerProfilePicureUri,D=a.pageResponsiveness,E=a.isInstantlyResponsive,F=a.refParam,G=a.pageVerifiedStatus,H=a.greetingDialogDelay,I=a.greetingDialogDisplay,J=a.loggedInGreeting,K=a.loggedOutGreeting,L=a.threadCSSColor,M=a.locale,N=a.icebreakers,O=a.bottomSpacing,P=a.shouldUseNewUnifiedBottomUpsellPrompt;a=a.shouldUseNewUnifiedTwoButtonUpsellPrompt;try{this.$1(b,c,d,e,f,g,h,i,j,k,l,m,n,o,v,w,t,p,q,r,s,u,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,a)}catch(a){}}var c=a.prototype;c.$1=function(a,c,d,e,f,g,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,aa,ba,ca,da){var Q=this,R=!1;b("MPNStorage").initialize(q,c,o);b("MPNIdentity").MPNIdentity.hasStorageAccess(function(S){b("MPNIdentity").MPNIdentity.init(S);var T=o,U=A;U&&(b("MPNCacheVersioning").isLatestVersion(U.v)||(b("MPNStorage").clearThirdPartyStorageState(),U=null));U||(U=Q.$2(L,K),b("MPNStorage").setThirdPartyStorageState(U));var V=!1,W,X,Y=U.visibility;if(S){var Z,$=b("MPNStorage").getFBStorageState();Z=(Z=$)==null?void 0:Z.rdr;Z==null&&!b("MPNCacheVersioning").isLatestVersion((Z=$)==null?void 0:Z.v)&&(b("MPNStorage").clearFBStorageState(),$=b("MPNStorage").getFBStorageState());b("MPNStorage").isAccessTokenExpired()&&(b("MPNStorage").clearFBStorageState(),U=Q.$2(L,K),b("MPNStorage").setThirdPartyStorageState(U));if($!=null&&$.requestID!=null&&$.requestID!=""){Z=$.requestID;($.rdr==b("MPNConstants").MPNRedirect.NEW_GUEST_SESSION||$.rdr==b("MPNConstants").MPNRedirect.ITP_CONTINUE_SESSION)&&(T=Z,b("MPNStorage").initialize(q,c,Z))}R=b("MPNStorage").setInitialStateIfNecessary(!1,Y);$=b("MPNStorage").getFBStorageState();if($!=null){V=$.chatState!=b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED;W=$.accessToken;X=$.userID;Y=$.visibility;U=babelHelpers["extends"]({},U,{path:$.currentPath,chatState:$.chatState,visibility:$.visibility,showUpgradePrompt:(Z=$.showUpgradePrompt)!=null?Z:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN});b("MPNStorage").setThirdPartyStorageState(U)}}$=Q.$3(S,U);Y=="hidden"&&b("MPNXDMessageManager").updateAppearance(!0,!0,"false","false",null,a,"true",$);b("MPNIdentity").MPNIdentity.subscribeLoggedInUserChanges(function(a,c){b("MPNIdentity").MPNIdentity.currentUserState()!=b("MPNIdentity").MPNIdentityState.GUEST&&(b("MPNStorage").clearFBStorageState(),b("MPNStorage").clearThirdPartyStorageState()),b("MPNXDMessageManager").reloadPlugin()});Z=b("gkx")("1845768");S={alignment:a,pageID:c,pageName:D,pagePassesSentryTest:g,hasMessagingPermission:k,isMuted:l,isPageBlocked:m,pageProfilePictureUri:E,viewerProfilePicureUri:F,threadCSSColor:O,pageResponsiveness:G,isInstantlyResponsive:H,isComposerDisabled:B,hasPersistentMenu:C,greetingDialogDelay:K,greetingDialogDisplay:L,loggedInGreeting:M,loggedOutGreeting:N,refParam:I,refererUri:p,originDomain:q,appSwitchUri:s,upgradeAppSwitchUri:t,shouldRemoveLoggedinLegalText:u,locale:P,isBusinessActive:n,icebreakers:aa,pageVerifiedStatus:J,initialRequestUri:(h||(h=b("URI"))).getRequestURI(),requestID:T,bottomSpacing:ba,chatStarted:V,accessToken:W,guestID:X,optimisticStorageState:U,soundURLs:r,isInitialLoad:R,hasGuestMode:v,showUpgradeUpsellPrompt:w&&!Z,shouldEnableFunnelImprovement:y,shouldUseChatInMessengerCTA:z,pluginMountTime:(i||(i=b("performanceAbsoluteNow")))(),serverTime:e,clientRequestTime:f,upgradeUpsellPrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN,messageCount:null,cookieAccessDenied:!1,hasAutomation:x,shouldUseNewUnifiedBottomUpsellPrompt:ca,shouldUseNewUnifiedTwoButtonUpsellPrompt:da};b("ReactDOM").render(j.jsx(b("LiveChatPluginErrorBoundary.react"),{pageID:c,children:j.jsx(b("CometBlueBridgeKeyCommandListener.react"),{children:j.jsx(b("MessagingPluginStateProvider"),{initialState:S,children:j.jsx("div",{className:"_95ry",children:j.jsx(b("MPNDesktopWrapper.react"),{path:$,redirectCommand:b("MPNStorage").getRedirectCommand()})})})})}),d)})};c.$2=function(a,c){a=a==="hide"||c>0;return{path:b("MPNLocalState").MPNLocalStatePath.WELCOME_PAGE,chatState:b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED,visibility:a?"hidden":"not-hidden",showUpgradePrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN}};c.$3=function(a,c){var d=b("MessagingPluginPathUtils").MPN_PATH.WELCOME;if(a){a=b("MPNStorage").getFBStorageState();a!=null&&a.currentPath!=null?(d=b("MessagingPluginPathUtils").MessagingPluginPathUtils.toMobilePath(a.currentPath),b("MPNXDMessageManager").storeThirdPartyState(a.currentPath,a.chatState)):c!=null&&a==null&&b("MPNXDMessageManager").removeThirdPartyState()}else c!=null&&c.path!=null&&(d=b("MessagingPluginPathUtils").MessagingPluginPathUtils.toMobilePath(c.path)),d==b("MessagingPluginPathUtils").MPN_PATH.THREAD&&(d=b("MessagingPluginPathUtils").MPN_PATH.ITPCONTINUE);return d};return a}();e.exports=a}),null);